image: julia:0.6

before_script:
  - apt-get update && apt-get -y install python-dev python-matplotlib
  - julia -e 'Pkg.clone(pwd())'

testjob:
  script:
    - julia -e 'Pkg.test("PhasedArray", coverage=true)'
  after_script:
    - julia -e 'Pkg.add("Coverage"); cd(Pkg.dir("PhasedArray"));
      using Coverage; cl, tl = get_summary(process_folder());
      println("(", cl/tl*100, "%) covered")'